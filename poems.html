<!DOCTYPE html>
<html>
<head>
  <title style="text-align:center;">Random vers</title>
</head>
<body>
  <h1 style="text-align:center;">Véletlen vers</h1>
 
  <button type="button" onclick="logMovies()">Mutass egy verset</button>
  <div id="title" style="text-align:center;"></div>
  <pre id="poem" style="text-align:center;"></pre>

<script>
async function logMovies() {
  const api_key = 734caf99831f8a5605b0450b0c0f99c2
  const response = await fetch("https://cors-anywhere.herokuapp.com/https://api.poet.hu/vers.php?f=vonyi&j="+api_key);
  const text = await response.text();

  console.log(text); // Log the XML response to inspect its structure

  const parser = new DOMParser();
  const xmlDoc = parser.parseFromString(text, "text/xml");

  
  const titleElement = xmlDoc.getElementsByTagName("cim")[0];
  const poemElement = xmlDoc.getElementsByTagName("versszoveg")[0];

  if (titleElement && poemElement) {
   
    const title = titleElement.textContent;
    const poem = poemElement.textContent;

    document.getElementById("title").innerHTML = `Cím: ${title}`;
    document.getElementById("poem").textContent = poem;
  } else {
    console.error("XML structure is not as expected. Check the tag names in the response.");
  }
}
</script>
</body>
</html>

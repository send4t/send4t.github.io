<!DOCTYPE html>
<html>
<head>
  <title>Random vers</title>
  <style>
    body {
  background-color: lightblue;
        }
    button {
      box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.19);
      border-radius: 12px;
      width: 10%;
    }
    button:hover {
      box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 20px 0 rgba(0,0,0,0.19);
      border-radius: 12px;
      width: 10%;
    }
    h1 {
      text-align: center;
    }
    pre {
      text-align: center;
    }
    div {
      font-family: Calibri;
      font-size: 16px;
      margin:30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Véletlen vers</h1>
  <div><button type="button" onclick="logPoem()">Mutass egy verset</button></div>
   <div id="author"></div>
  <div id="title"></div>
  <pre id="poem"></pre>
  <div id="likeButtonContainer"></div>
  <div id="gifContainer"></div>

  <script>
var cors = require('cors')
 
var corsOptions = {
  origin: 'https://vast-lime-cocoon.cyclic.app/books',
  optionsSuccessStatus: 200 // some legacy browsers (IE11, various SmartTVs) choke on 204
}
 
app.get('/books', cors(corsOptions), function (req, res, next) {
  res.json({msg: 'This is CORS-enabled for only example.com.'})
})
 
app.listen(80, function () {
  console.log('CORS-enabled web server listening on port 80')
})





    
  async function fetchMoviesJSON() {
  const response = await fetch('https://vast-lime-cocoon.cyclic.app/books');
  const movies = await response.json();
  return movies;
}

fetchMoviesJSON().then(movies => {
  movies; // fetched movies
});
    console.log(movies)

    
    function get_poems_from_file(file_path) {
      try {
        var file = new XMLHttpRequest();
        file.open("GET", file_path, false);
        file.send(null);
        var poems = JSON.parse(file.responseText);
        return poems;
      } catch (error) {
        console.error("Error loading poems:", error);
        return [];
      }
    }

    function getRandomPoem(poems) {
      if (poems.length > 0) {
        var randomIndex = Math.floor(Math.random() * poems.length);
        return poems[randomIndex];
      } else {
        return null;
      }
    }

    function logPoem() {
      var poems = get_poems_from_file("poems.json");
      var authorElement = document.getElementById("author");
      var titleElement = document.getElementById("title");
      var poemElement = document.getElementById("poem");
      var likeButtonContainer = document.getElementById("likeButtonContainer");
      var gifContainer = document.getElementById("gifContainer");

      // Delete all previous entries
      authorElement.innerHTML = "";
      titleElement.innerHTML = "";
      poemElement.textContent = "";
      likeButtonContainer.innerHTML = "";
      gifContainer.innerHTML = "";

      var poem = getRandomPoem(poems);
      if (poem) {
        var author = poem.author;
        var title = poem.title;
        var content = poem.content;
        authorElement.innerHTML = "Szerző: " + author;
        titleElement.innerHTML = "Cím: " + title;
        poemElement.textContent = content;

        // Create "Like" button
        var likeButton = document.createElement("button");
        likeButton.textContent = "Tetszik";
        likeButton.addEventListener("click", showGif);
        likeButtonContainer.appendChild(likeButton);
      } else {
        console.error("No poems found in the list.");
        poemElement.textContent = "Nincs elérhető vers.";
      }
    }

  function showGif() {
          const gifUrl = "https://media.tenor.com/DBFq-CWWkGoAAAAC/baby-booty.gif"; // Replace with your own GIF URL

          // Hide "Like" button
          document.getElementById("likeButtonContainer").style.display = "none";

          // Clear previous GIF
          document.getElementById("gifContainer").innerHTML = "";

          // Create GIF element
          const gifElement = document.createElement("img");
          gifElement.src = gifUrl;

          document.getElementById("gifContainer").appendChild(gifElement);
        }

    logPoem();
  </script>
 
</body>
</html>

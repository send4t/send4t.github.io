<!DOCTYPE html>
<html>
<head>
  <title>Random vers</title>
  <style>
    body {
  background-color: lightblue;
        }
    button {
      box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 10px 0 rgba(0,0,0,0.19);
      border-radius: 12px;
      width: 10%;
    }
    button:hover {
      box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 20px 0 rgba(0,0,0,0.19);
      border-radius: 12px;
      width: 10%;
    }
    h1 {
      text-align: center;
    }
    pre {
      text-align: center;
    }
    div {
      font-family: Calibri;
      font-size: 16px;
      margin:30px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Véletlen vers</h1>
  <div><button type="button" onclick="logPoem()">Mutass egy verset</button></div>
  <div><button type="button" onclick="fetchMovies()">Mutass egy konyvet</button></div>
    <div><button type="button" onclick="fetchMoviesJSON()">Mutass egy konyvetJSON</button></div>
   <div><button type="button" onclick="callAPIRead()">Mutass egy konyvetAPIread</button></div>
   <div id="author"></div>
  <div id="title"></div>
  <pre id="poem"></pre>
  <div id="likeButtonContainer"></div>
  <div id="gifContainer"></div>

  <script>
  

import fetch from 'node-fetch';

const express = require("express");
const bodyParser = require("body-parser");

const app = express();



const response = await fetch('https://github.com/');
const body = await response.text();

console.log(body);


async function fetchMoviesJSON() {
  try {
    const response = await fetch('https://extinct-jade-bedclothes.cyclic.app/');
    const movies = await response.json();
    console.log(movies); // Logs fetched movies
    return movies;
  } catch (error) {
    console.error('Error fetching movies:', error);
    return [];
  }
}

    var callAPIRead =()=>{
            // instantiate a headers object
            var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variabl
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'GET',
                headers: myHeaders,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch("**MY API GET URL**", requestOptions)
            .then(response => response.text())
            .then(result => alert(JSON.parse(result).body))
            .catch(error => console.log('error', error));
        }

fetchMoviesJSON().then((movies) => {
  console.log(movies); // Logs fetched movies
  console.log(movies.title); // Access the title of the movies object if it exists
});

async function fetchMovies() {
  try {
    const response = await fetch('https://extinct-jade-bedclothes.cyclic.app');
    console.log(response); // Logs the HTTP response object
  } catch (error) {
    console.error('Error fetching movies:', error);
  }
}

    
 
    

    
    function get_poems_from_file(file_path) {
      try {
        var file = new XMLHttpRequest();
        file.open("GET", file_path, false);
        file.send(null);
        var poems = JSON.parse(file.responseText);
        return poems;
      } catch (error) {
        console.error("Error loading poems:", error);
        return [];
      }
    }

    function getRandomPoem(poems) {
      if (poems.length > 0) {
        var randomIndex = Math.floor(Math.random() * poems.length);
        return poems[randomIndex];
      } else {
        return null;
      }
    }

    function logPoem() {
      var poems = get_poems_from_file("poems.json");
      var authorElement = document.getElementById("author");
      var titleElement = document.getElementById("title");
      var poemElement = document.getElementById("poem");
      var likeButtonContainer = document.getElementById("likeButtonContainer");
      var gifContainer = document.getElementById("gifContainer");

      // Delete all previous entries
      authorElement.innerHTML = "";
      titleElement.innerHTML = "";
      poemElement.textContent = "";
      likeButtonContainer.innerHTML = "";
      gifContainer.innerHTML = "";

      var poem = getRandomPoem(poems);
      if (poem) {
        var author = poem.author;
        var title = poem.title;
        var content = poem.content;
        authorElement.innerHTML = "Szerző: " + author;
        titleElement.innerHTML = "Cím: " + title;
        poemElement.textContent = content;

        // Create "Like" button
        var likeButton = document.createElement("button");
        likeButton.textContent = "Tetszik";
        likeButton.addEventListener("click", showGif);
        likeButtonContainer.appendChild(likeButton);
      } else {
        console.error("No poems found in the list.");
        poemElement.textContent = "Nincs elérhető vers.";
      }
    }

  function showGif() {
          const gifUrl = "https://media.tenor.com/DBFq-CWWkGoAAAAC/baby-booty.gif"; // Replace with your own GIF URL

          // Hide "Like" button
          document.getElementById("likeButtonContainer").style.display = "none";

          // Clear previous GIF
          document.getElementById("gifContainer").innerHTML = "";

          // Create GIF element
          const gifElement = document.createElement("img");
          gifElement.src = gifUrl;

          document.getElementById("gifContainer").appendChild(gifElement);
        }

    logPoem();
  </script>
 
</body>
</html>

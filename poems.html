<!DOCTYPE html>
<html>
<head>
  <title>Random vers</title>
</head>
<body>
  <h1>VÃ©letlen vers</h1>
  <h2>Enter a number from 1 to 5 to predict the outcome of the gif.</h2>
  <button type="button" onclick="logMovies()">Mutass egy verset</button>
  <div id="author"></div>
  <div id="title"></div>
  <div id="poem"></div>

<script>
async function logMovies() {
  const response = await fetch("https://cors-anywhere.herokuapp.com/https://api.poet.hu/vers.php?f=vonyi&j=734caf99831f8a5605b0450b0c0f99c2");
  const text = await response.text();

  console.log(text); // Log the XML response to inspect its structure

  const parser = new DOMParser();
  const xmlDoc = parser.parseFromString(text, "text/xml");

  const authorElement = xmlDoc.getElementsByTagName("szerzo")[0];
  const titleElement = xmlDoc.getElementsByTagName("cim")[0];
  const poemElement = xmlDoc.getElementsByTagName("versszoveg")[0];

  if (authorElement && titleElement && poemElement) {
    const author = authorElement.textContent;
    const title = titleElement.textContent;
    const poem = poemElement.textContent;

    document.getElementById("author").innerHTML = `Author: ${author}`;
    document.getElementById("title").innerHTML = `Title: ${title}`;
    document.getElementById("poem").innerHTML = `Poem: ${poem}`;
  } else {
    console.error("XML structure is not as expected. Check the tag names in the response.");
  }
}
</script>
</body>
</html>
